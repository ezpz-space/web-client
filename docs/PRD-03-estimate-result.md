# PRD-03: 견적 결과 & 상담 신청

> **프로젝트**: ezpz - 창호 견적 비교 웹서비스
> **버전**: 1.0
> **최종 수정**: 2026-02-10

---

## 1. 개요

이 문서는 **견적 결과 화면**, **상담 신청 프로세스**, **완료 화면**의 기능 요구사항과 UI 명세를 정의합니다.

### 대상 라우트

| 라우트 | 페이지 | 설명 |
|--------|--------|------|
| `/estimate/result` | 견적 결과 | 브랜드별 비교 카드 |
| `/estimate/consultation` | 상담 신청 | 상담 일정 및 방식 선택 |
| `/estimate/complete` | 완료 | 성공 메시지 |

---

## 2. 견적 결과 화면 (`/estimate/result`)

### 2.1 Header

| 요소 | 동작 |
|------|------|
| ← 뒤로가기 | 견적 프로세스 Step 5로 이동 |
| 타이틀 | "견적 결과" |

### 2.2 요약 섹션

사용자가 입력한 정보를 요약 표시합니다.

```
┌─────────────────────────────────┐
│  📋 입력 정보 요약               │
│                                 │
│  이름      홍길동               │
│  주소      서울 강남구 테헤란로 123  │
│  창 유형   확장 발코니            │
│  규격      1800 × 2100 mm      │
│  갯수      5개                  │
│                                 │
│  [정보 수정하기]                 │  → Step 1로 이동
└─────────────────────────────────┘
```

- Skip된 항목은 "미입력"으로 표시 (Gray 텍스트)
- "정보 수정하기" 텍스트 링크: Step 1로 이동하여 처음부터 수정 가능

### 2.3 브랜드별 견적 카드

3개 브랜드의 견적을 카드 형태로 세로 나열합니다.

#### 카드 레이아웃

```
┌─────────────────────────────────┐
│  [LX 로고]  LX 하우시스          │
│                                 │
│  예상 견적                       │
│  ┌─────────────────────────┐    │
│  │  100만원 ~ 150만원       │    │
│  └─────────────────────────┘    │
│                                 │
│  단가  20만원 ~ 30만원 / 개     │
│  평당  약 15만원 ~ 20만원       │
│                                 │
│  설치사업 건수  1,200건+        │
│                                 │
│  ─────────────────────────────  │
│  • 3중 유리 기본                 │
│  • 에너지 효율 1등급             │
│  • 10년 품질 보증                │
│                                 │
│  ┌─────────────────────────┐    │
│  │   방문 견적 신청하기      │    │  → 상담 신청으로 이동
│  └─────────────────────────┘    │
│  [상세 보기 ▾]                   │
└─────────────────────────────────┘
```

#### 카드 데이터

| 요소 | 설명 |
|------|------|
| 브랜드 로고 | 40px 높이, 컬러 |
| 브랜드명 | body1, Bold |
| 예상 견적 범위 | h2, Primary Color, Bold. 강조 배경 |
| 단가 (개당) | body2, Gray 500 |
| 평당 비용 | body2, Gray 500. 면적 기반 단가 |
| 설치사업 건수 | caption, Gray 500. 해당 브랜드 시공 실적 수 (신뢰도 지표) |
| 특징 목록 | 불릿 리스트, body2 |
| 방문 견적 신청 | Secondary Button. 클릭 시 해당 브랜드로 상담 신청 이동 |
| 상세 보기 | 접힘/펼침 토글 (추가 상세 정보) |

#### 브랜드별 정보

| 브랜드 | 로고 파일 | 가격 범위 (예시) | 평당 비용 (예시) | 설치사업 건수 | 특징 |
|--------|-----------|-----------------|-----------------|---------------|------|
| LX 하우시스 | `lx-logo.svg` | 100~150만원 | 15~20만원 | 1,200건+ | 3중 유리 기본, 에너지 효율 1등급, 10년 보증 |
| KCC 글라스 | `kcc-logo.svg` | 90~140만원 | 13~18만원 | 950건+ | 독일산 하드웨어, 단열 성능 우수, 8년 보증 |
| 청암 | `chungam-logo.svg` | 80~120만원 | 11~16만원 | 800건+ | 가성비 우수, 다양한 디자인, 5년 보증 |

### 2.4 카드 상세 보기 (펼침)

"상세 보기" 클릭 시 추가 정보 노출:

| 항목 | 내용 |
|------|------|
| 유리 사양 | 이중/삼중, Low-E 코팅 여부 |
| 프레임 소재 | PVC, 알루미늄, 복합 등 |
| 단열 성능 | W/m²K 수치 |
| 방음 성능 | dB 수치 |
| 보증 기간 | 연 단위 |

### 2.5 가격 면책 조항

카드 하단에 면책 문구 표시:

> ※ 위 금액은 예상 견적이며, 실제 시공 비용은 현장 상황에 따라 달라질 수 있습니다.

- 스타일: caption, Gray 500

### 2.6 하단 CTA

```
┌─────────────────────────────────┐
│                                 │
│  전문가 상담을 원하시나요?        │
│                                 │
│  ┌─────────────────────────┐    │
│  │   상담 신청하기           │    │  → /estimate/consultation
│  └─────────────────────────┘    │
│                                 │
│  [홈으로 돌아가기]               │  → /
│                                 │
└─────────────────────────────────┘
```

| 버튼 | 스타일 | 동작 |
|------|--------|------|
| "상담 신청하기" | Primary Button (전체 너비) | `/estimate/consultation` 이동 |
| "홈으로 돌아가기" | 텍스트 링크 (중앙 정렬) | `/` 이동 |

### 2.7 분기 로직

```
견적 결과 확인
    │
    ├── "상담 신청하기" 클릭 → 상담 신청 폼
    │
    └── "홈으로 돌아가기" 클릭 → 랜딩페이지
```

---

## 3. 상담 신청 (`/estimate/consultation`)

### 3.1 Header

| 요소 | 동작 |
|------|------|
| ← 뒤로가기 | 견적 결과 화면으로 이동 |
| 타이틀 | "상담 신청" |

### 3.2 기본 정보 확인

Step 1~2에서 입력한 정보를 읽기 전용으로 표시합니다.

```
┌─────────────────────────────────┐
│  기본 정보                       │
│                                 │
│  이름      홍길동                │
│  전화번호   010-1234-5678       │
│  주소      서울 강남구 테헤란로 123  │
│                                 │
│  [정보 수정] ← 텍스트 링크       │
└─────────────────────────────────┘
```

- "정보 수정" 클릭 시: 확인 모달 → Step 1로 이동
- 정보는 회색 배경 카드 안에 표시

### 3.3 상담 요일 선택

**라벨:** "상담 가능한 요일을 선택해주세요" (복수 선택 가능)

```
┌─────┐ ┌─────┐ ┌─────┐ ┌─────┐ ┌─────┐
│ 월  │ │ 화  │ │ 수  │ │ 목  │ │ 금  │
└─────┘ └─────┘ └─────┘ └─────┘ └─────┘
```

| 상태 | 스타일 |
|------|--------|
| 미선택 | 흰색 배경, Gray 300 border |
| 선택됨 | Primary 배경, 흰색 텍스트 |
| 호버 | Gray 100 배경 |

**Validation:**
- 최소 1개 요일 선택 필수
- 에러 메시지: "상담 가능한 요일을 선택해주세요"

### 3.4 상담 시간대 선택

**라벨:** "상담 가능한 시간대를 선택해주세요" (단일 선택)

**그리드 UI:**

```
┌────────────┐ ┌────────────┐
│ 09:00~10:00│ │ 10:00~11:00│
├────────────┤ ├────────────┤
│ 11:00~12:00│ │ 13:00~14:00│
├────────────┤ ├────────────┤
│ 14:00~15:00│ │ 15:00~16:00│
├────────────┤ ├────────────┤
│ 16:00~17:00│ │ 17:00~18:00│
└────────────┘ └────────────┘
```

| 상태 | 스타일 |
|------|--------|
| 미선택 | 흰색 배경, Gray 300 border |
| 선택됨 | Primary 배경, 흰색 텍스트 |
| 비활성 (점심시간 12:00~13:00) | Gray 100 배경, Gray 400 텍스트, 클릭 불가 |

**Validation:**
- 1개 시간대 선택 필수
- 에러 메시지: "상담 가능한 시간대를 선택해주세요"

### 3.5 상담 방식 선택

**라벨:** "상담 방식을 선택해주세요" (단일 선택)

```
┌─────────────────────────┐
│  📞  전화 상담            │
│  전화로 상담을 받겠습니다  │
└─────────────────────────┘

┌─────────────────────────┐
│  🏠  방문 상담            │
│  직접 방문 상담을 받겠습니다│
└─────────────────────────┘
```

| 상태 | 스타일 |
|------|--------|
| 미선택 | 흰색 배경, Gray 300 border |
| 선택됨 | Primary border (2px), 체크 아이콘 표시 |

**Validation:**
- 1개 방식 선택 필수
- 에러 메시지: "상담 방식을 선택해주세요"

### 3.6 버튼

- **"상담 신청하기"** — Primary Button, 하단 고정
- 모든 필수 항목 (요일 + 시간대 + 상담 방식) 선택 시 활성화

### 3.7 UI 상태

| 상태 | 설명 |
|------|------|
| 초기 | 기본 정보 표시, 나머지 미선택, 버튼 비활성 |
| 부분 선택 | 일부 항목만 선택, 버튼 비활성 |
| 완료 | 모든 항목 선택, 버튼 활성 |
| 제출 중 | 버튼 로딩 스피너, 중복 클릭 방지 |
| 에러 | 미입력 항목에 에러 메시지 표시 |

---

## 4. 상담 신청 API

### 4.1 Request

```
POST /api/consultations
Content-Type: application/json

{
  "estimateId": "est_abc123",
  "name": "홍길동",
  "phone": "01012345678",
  "address": "서울 강남구 테헤란로 123 101동 1501호",
  "availableDays": ["MON", "WED", "FRI"],
  "timeSlot": "09:00-10:00",
  "consultationType": "PHONE" | "VISIT"
}
```

### 4.2 Response

```json
{
  "success": true,
  "consultationId": "con_xyz789",
  "message": "상담 신청이 완료되었습니다"
}
```

### 4.3 에러 처리

| 에러 코드 | 메시지 | 동작 |
|-----------|--------|------|
| 400 | 입력 정보를 확인해주세요 | 에러 필드 하이라이트 |
| 404 | 견적 정보를 찾을 수 없습니다 | "견적을 다시 진행해주세요" + 홈 이동 |
| 409 | 이미 상담이 신청되었습니다 | "이미 신청된 상담이 있습니다" 모달 |
| 429 | 요청이 너무 많습니다 | "잠시 후 다시 시도해주세요" 토스트 |
| 500 | 서버 오류 | "일시적인 오류가 발생했습니다" + 재시도 버튼 |

---

## 5. 완료 화면 (`/estimate/complete`)

### 5.1 화면 구성

```
┌─────────────────────────────────┐
│                                 │
│                                 │
│           ✅ (성공 아이콘)        │
│                                 │
│     상담 신청이 완료되었습니다!    │
│                                 │
│   전문가가 확인 후               │
│   순차적으로 연락드리겠습니다      │
│                                 │
│  ┌─────────────────────────┐    │
│  │  상담 신청 내역           │    │
│  │                         │    │
│  │  상담 번호  CON-XYZ789  │    │
│  │  상담 요일  월, 수, 금   │    │
│  │  상담 시간  09:00~10:00 │    │
│  │  상담 방식  전화 상담    │    │
│  └─────────────────────────┘    │
│                                 │
│  ┌─────────────────────────┐    │
│  │   홈으로 돌아가기         │    │  → /
│  └─────────────────────────┘    │
│                                 │
└─────────────────────────────────┘
```

### 5.2 요소 상세

| 요소 | 스타일 |
|------|--------|
| 성공 아이콘 | 체크마크 애니메이션 (Lottie 또는 CSS), 중앙 정렬 |
| 메인 메시지 | h2, Bold, Gray 900, 중앙 정렬 |
| 서브 메시지 | body1, Gray 500, 중앙 정렬 |
| 상담 내역 카드 | Gray 100 배경, 12px border-radius, 패딩 24px |
| CTA 버튼 | Primary Button, 전체 너비 |

### 5.3 동작

- 브라우저 뒤로가기 방지: `history.replaceState`로 결과 페이지 히스토리 대체
- localStorage 견적 데이터 삭제 (`ezpz_estimate_draft`)
- 30초 후 자동 홈 리다이렉트 (옵션)

### 5.4 상담 없이 완료하는 경우

견적 결과에서 "홈으로 돌아가기"를 선택한 경우:
- 완료 화면을 거치지 않고 바로 홈(`/`)으로 이동
- localStorage 견적 데이터는 유지 (나중에 불러오기 가능)

---

## 6. 전체 User Flow 요약

```
[견적 결과 화면]
       │
       ├── "상담 신청하기" ──▶ [상담 신청 폼] ──▶ API 호출 ──▶ [완료 화면] ──▶ [홈]
       │                          │
       │                          └── "뒤로가기" ──▶ [견적 결과 화면]
       │
       └── "홈으로 돌아가기" ──▶ [홈]
              (견적 데이터 유지)
```

---

## 7. 상태 관리

### 7.1 견적 결과 상태

```typescript
interface EstimateResult {
  estimateId: string;
  userInfo: {
    name: string;
    phone: string;
    address: string;
    floor: number;
  };
  windowType: 'expanded' | 'non-expanded' | null;
  dimensions: { width: number; height: number } | null;
  quantity: number | null;
  results: BrandEstimate[];
}

interface BrandEstimate {
  brand: string;
  brandName: string;
  logoUrl: string;
  minPrice: number;
  maxPrice: number;
  pricePerUnit: { min: number; max: number };
  pricePerPyeong: { min: number; max: number };
  installationCount: number;
  features: string[];
  details: BrandDetail;
}
```

### 7.2 상담 신청 상태

```typescript
interface ConsultationForm {
  estimateId: string;
  availableDays: DayOfWeek[];
  timeSlot: string;
  consultationType: 'PHONE' | 'VISIT';
}

type DayOfWeek = 'MON' | 'TUE' | 'WED' | 'THU' | 'FRI';
```

---

## 8. 접근성 요구사항

- 요일 선택: `role="group"` + 개별 `role="checkbox"` (복수 선택)
- 시간대 선택: `role="radiogroup"` + 개별 `role="radio"` (단일 선택)
- 상담 방식 선택: `role="radiogroup"` + 개별 `role="radio"` (단일 선택)
- 성공 화면: `role="alert"` 또는 `aria-live="polite"`
- 모든 선택 항목 키보드 접근 가능 (Space/Enter로 선택)
- 가격 정보에 `aria-label`로 전체 금액 명시 (예: "100만원에서 150만원")
