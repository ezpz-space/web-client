# PRD-03: 최종 견적, 상담 요청, 완료

> **버전**: 2.0 (Figma Design 기반)
> **최종 수정**: 2026-02-10

---

## 1. 개요

이 문서는 견적 결과 확인, 상담 요청, 완료 화면의 UI와 기능을 정의합니다.

### 전체 흐름

```
[창 목록] → [최종 견적 확인하기] → [로딩] → [최종 견적 결과]
                                                    │
                                                    ├── "상담 요청하기" → [상담 요청 1/2] → [상담 요청 2/2] → [완료]
                                                    └── "저장하기" → 저장 후 홈
```

---

## 2. 최종 견적 결과 (`/estimate/result`)

### 2.1 UI 구성

| 요소 | Figma 카피 |
|------|-----------|
| 네비 제목 (18px/700) | `견적 알아보기` |
| 제목 (24px/700) | `우리집 창문 예상견적` |
| 총 가격 (36px/700) | `100~300` |
| 단위 (16px/400) | `만원` |
| 면책 문구 (14px/400) | `입력한 정보로 계산된 예상 금액이며, 실제 시공가는 현장 조건에 따라 달라질 수 있습니다.` |
| 상담 CTA (16px/600) | `상담 요청하기` |
| 저장 CTA (16px/600) | `저장하기` |

### 2.2 창 정보 요약

| 요소 | Figma 카피 |
|------|-----------|
| 섹션 제목 (16px/700) | `창 정보` |
| 창 요약 (13px/500) | `발코니 창, 1660×2000, 확장형, 투명, 2W` (각 창별) |
| 총 수량 (14px/400) | `총 N개` |

### 2.3 브랜드별 견적

탭 또는 카드로 3개 브랜드를 표시합니다.

#### 브랜드 정보

| 브랜드 | 이름 (Figma 카피) | 설명 |
|--------|-----------------|------|
| LX | `LX` | LX 하우시스 브랜드 창호 |
| KCC | `KCC 글라스` | KCC 글라스 브랜드 창호 |
| 청암 | `청암홈 윈도우` | 청암홈 윈도우 브랜드 창호 |

#### 브랜드 카드 구성

| 요소 | 설명 |
|------|------|
| 브랜드명 (18px/600) | 브랜드 이름 |
| 가격 범위 (24px/700) | `100~200만원` |
| 시공비 (14px/400) | 설치 시공 비용 |
| 설명 (15px/400) | 브랜드 소개 텍스트 |
| 프로모션 뱃지 (10px/600) | `20% 할인`, `안전방충망 행사 중` 등 (lime 배경) |
| 상세 보기 (14px/500) | 접힘/펼침 토글 |

#### 상세 보기 (펼침)

| 항목 | 설명 |
|------|------|
| 유리 사양 | 이중/삼중, Low-E 코팅 여부 |
| 프레임 소재 | PVC, 알루미늄, 복합 |
| 단열 성능 | W/m²K 수치 |
| 방음 성능 | dB 수치 |
| 보증 기간 | 연 단위 |

### 2.4 하단 CTA

| 요소 | Figma 카피 |
|------|-----------|
| 메인 버튼 (16px/600) | `상담 요청하기` |
| 보조 버튼 (16px/600) | `저장하기` |

- "상담 요청하기" → `/estimate/consultation`
- "저장하기" → DB 저장 후 홈 이동

---

## 3. 상담 요청 (`/estimate/consultation`)

### 3.1 Step 1/2 — 기본 정보

| 요소 | Figma 카피 |
|------|-----------|
| 네비 제목 (18px/700) | `이제 전문가에게 맡겨볼게요` |
| 스텝 (16px/400) | `1/2` |
| 부제 (16px/400) | `상담에 필요한 정보를 남겨주세요.` |
| 이름 라벨 (15px/400) | `이름` |
| 이름 placeholder | `이름을 입력해주세요` |
| 연락처 라벨 (15px/400) | `연락처` |
| 연락처 placeholder | `010-0000-0000` |
| CTA 버튼 (16px/600) | `계속하기` |
| Skip 버튼 (16px/500) | `건너뛰고 상담 요청하기` |

- Sign-in에서 입력한 이름/연락처가 있으면 자동 채움
- Skip 시 이름/연락처 없이 바로 상담 요청 제출

### 3.2 Step 2/2 — 일정 선택

| 요소 | Figma 카피 |
|------|-----------|
| 네비 제목 (18px/700) | `이제 전문가에게 맡겨볼게요` |
| 스텝 (16px/400) | `2/2` |
| 요일 라벨 (14px/400) | 요일 선택 |
| 요일 옵션 (13px/500) | `월` / `화` / `수` / `목` / `금` |
| 시간 라벨 (14px/400) | 시간 선택 |
| 시간 슬롯 (14px/400) | 30분 단위 (PM 3:00 ~ PM 10:00) |
| CTA 버튼 (16px/600) | `상담 요청하기` |
| Skip 버튼 (16px/500) | `건너뛰고 상담 요청하기` |

#### 요일 선택

- 월~금 칩 (복수 선택 가능)
- 선택됨: Secondary(Teal) 배경 + 흰색 텍스트
- 미선택: 흰색 배경 + Gray 보더

#### 시간 선택

- 30분 단위 슬롯: 3:00 PM ~ 10:00 PM
- 2열 그리드
- 선택됨: Secondary(Teal) 배경 + 흰색 텍스트
- 미선택: 흰색 배경 + Gray 보더

### 3.3 Validation

| 필드 | 규칙 |
|------|------|
| 이름 | 2~20자, 한글/영문 (선택) |
| 연락처 | 010 시작, 10~11자리 (선택) |
| 요일 | 선택 사항 |
| 시간 | 선택 사항 |

- 모든 필드가 선택 사항 — "건너뛰고 상담 요청하기"로 Skip 가능

---

## 4. 완료 화면 (`/estimate/complete`)

### 4.1 UI 구성

| 요소 | Figma 카피 |
|------|-----------|
| 성공 아이콘 | 체크마크 (success 컬러) |
| 제목 (24px/700) | `상담 요청이 완료됐어요.` |
| 설명 (16px/400) | `전문가가 내용을 확인한 뒤 순차적으로 연락드릴 거에요. 조금만 기다려주세요!` |
| CTA 버튼 (16px/600) | `홈으로 돌아가기` |

### 4.2 동작

- 브라우저 뒤로가기 방지: `history.replaceState`
- localStorage 견적 데이터 삭제 (`ezpz_estimate_draft`)

---

## 5. 다이얼로그

### 5.1 나가기 확인

견적 프로세스 중 뒤로가기/홈 이동 시:

| 요소 | Figma 카피 |
|------|-----------|
| 제목 (20px/600) | `잠시 나가셔도 괜찮아요` |
| 설명 (16px/400) | `입력한 정보는 자동 저장되니, 나중에 이어서 진행할 수 있어요.` |
| 확인 버튼 (16px/600) | `나가기` |
| 취소 버튼 (16px/600) | `계속하기` |

### 5.2 저장 확인

결과 화면에서 "저장하기" 클릭 시:

| 요소 | Figma 카피 |
|------|-----------|
| 제목 (20px/600) | `견적을 저장할까요?` |
| 설명 (16px/400) | `저장된 견적은 나중에 다시 불러올 수 있어요.` |
| 확인 버튼 (16px/600) | `저장하기` |
| 취소 버튼 (16px/600) | `취소` |

---

## 6. API

### 6.1 견적 결과 조회

```
GET /api/estimates/:id

Response:
{
  "estimateId": "est_abc123",
  "totalPrice": { "min": 1000000, "max": 3000000 },
  "windowSummary": [
    { "type": "발코니 창 (확장)", "count": 2 },
    { "type": "일반 창", "count": 1 }
  ],
  "brands": [
    {
      "brand": "LX",
      "brandName": "LX",
      "priceRange": { "min": 1400000, "max": 2200000 },
      "installationCost": 300000,
      "description": "LX 하우시스 브랜드 창호",
      "promotions": ["20% 할인"]
    }
  ]
}
```

### 6.2 상담 요청

```
POST /api/consultations

Request:
{
  "estimateId": "est_abc123",
  "name": "홍길동",           // 선택
  "phone": "01012345678",     // 선택
  "preferredDays": ["MON", "WED"],  // 선택
  "preferredTime": "3:00 PM"        // 선택
}

Response:
{
  "success": true,
  "consultationId": "con_xyz789"
}
```

### 6.3 에러 처리

| 에러 코드 | 메시지 | 동작 |
|-----------|--------|------|
| 400 | 입력 정보를 확인해주세요 | 에러 필드 하이라이트 |
| 404 | 견적 정보를 찾을 수 없습니다 | 홈 이동 |
| 429 | 요청이 너무 많습니다 | 토스트: "잠시 후 다시 시도해주세요" |
| 500 | 서버 오류 | 토스트 + 재시도 버튼 |

---

## 7. 접근성 요구사항

- 요일 선택: `role="group"` + 개별 `aria-pressed` (복수 선택)
- 시간 선택: `role="radiogroup"` + 개별 `role="radio"` (단일 선택)
- 브랜드 카드 상세 보기: `aria-expanded` 토글
- 성공 화면: `role="alert"` 또는 `aria-live="polite"`
- 가격 정보: `aria-label`로 전체 금액 명시
- 다이얼로그: `role="dialog"`, `aria-modal="true"`, 포커스 트랩
- 모든 선택 항목 키보드 접근 가능 (Space/Enter)
